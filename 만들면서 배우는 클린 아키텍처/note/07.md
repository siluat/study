# 07 아키텍처 요소 테스트하기

## 단위 테스트로 도메인 엔티티 테스트하기

- 이해하기 쉽고 아주 빠르게 실행되는 단위 테스트가 도메인 엔티티에 있는 비즈니스 규칙을 검증하기 가장 적절한 방법이다.
- 도메인 엔티티의 행동은 다른 클래스에 거의 의존하지 않기 때문에 다른 종류의 테스트는 필요하지 않다.

## 단위 테스트로 유스케이스 테스트하기

- `SendMoneyServiceTest`에서는 모킹된 의존 대상의 특정 메서드와 상호작용했는지 여부를 검증한다. 테스트가 코드의 행동 변경뿐만 아니라 코드의 구조 변경에도 취약해져서 코드가 리팩토링되면 테스트도 변경될 확률이 높아진다. 어떤 상호작용을 검증하고 싶은지 신중해야 한다. 모든 동작을 검증하려고 하면 클래스가 조금이라도 바뀔 때마다 테스트를 변경해야 한다. 중요한 핵심만 골라 집중해서 테스트하는 것이 좋다.

## 통합 테스트로 웹 어댑터 테스트하기

- `SendMoneyContollerTest`에서는 입력 객체를 만들고 목 HTTP 요청을 웹 컨트롤러에 보낸다. HTTP 응답 상태를 검증하고 모킹한 유스케이스가 호출됐는지 검증한다. 웹 어댑터의 책임 대부분은 이 테스트로 커버된다.
- 웹 컨트롤러가 스프링 프레임워크에 강하게 묶여 있어 격리된 상태로 테스트하기보다는 프레임워크와 통합된 상태로 테스트하는 것이 합리적이다.

## 통합 테스트로 영속성 어댑터 테스트하기

- 웹 어댑터와 비슷한 이유로 영속성 어댑터의 테스트에는 통합 테스트를 적용하는 것이 합리적이다.

## 시스템 테스트로 주요 경로 테스트하기

- 전체 애플리케이션을 띄우고 API를 통해 요청을 보내고 모든 계층이 조화롭게 잘 동작하는지 검증한다.
