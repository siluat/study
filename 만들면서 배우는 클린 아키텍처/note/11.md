# 11 의식적으로 지름길 사용하기

## 왜 지름길은 깨진 창문 같을까?

- 품질이 떨어진 코드에서 작업할 때 더 낮은 품질의 코드를 추가하기가 쉽다.
- 코딩 규칙을 많이 어긴 코드에서 작업할 때 또 다른 규칙을 어기기도 쉽다.
- 지름길을 많이 사용한 코드에서 작업할 때 또 다른 지름길을 추가하기도 쉽다.

## 깨끗한 상태로 시작할 책임

- 지름길이 몰래 스며드는 순간 깨진 창문과 같아져 버려서 더 많은 지름길을 끌어들이기 때문에 가능한 한 지름길을 거의 쓰지 않고 기술 부채를 지지 않은 채로 프로젝트를 깨끗하게 시작하는 것이 중요하다.
- 그러나 때로는 지름길을 취하는 것이 더 실용적일 때도 있다. 그리 중요하지 않은 부분이거나, 프로토타이핑 작업 중이거나, 경제적인 이유가 있을 수도 있다.

## 유스케이스 간 모델 공유하기

- 유스케이스 간 모델을 공유하게 되면 유스케이스 간 결합이 생긴다.
- 유스케이스 간 입출력 모델을 공유하는 것은 유스케이스들이 기능적으로 묶여 있을 때 유효하다. **특정 세부사항을 변경할 경우 실제로 두 유스케이스 모두에 영향을 주고 싶은 것이다.**
- 하나의 유스케이스가 독립적으로 진화해야 한다면, 입출력 모델을 분리할 시점이다.

## 도메인 엔티티를 입출력 모델로 사용하기

- 도메인 엔티티가 유스케이스에 결합된다. 많은 유스케이스가 간단한 유스케이스로 시작해서 시간이 지나면서 복잡한 도메인 로직 괴물이 되어간다.
- 도메인 모델로부터 독립적인 전용 입력 모델로 교체해야 하는 시점을 잘 파악해야 한다.

## 인커핑 포트 건너뛰기

- 아웃고잉 포트는 애플리케이션 계층과의 의존성 역전을 위해 필수 요소인 반면 인커밍 포트는 의존성 역전에 필수적 요소는 아니다. 인커밍 포트를 제거하고 추상화 계층을 줄이는 것이 괜찮게 느껴질 수 있다.
- 하지만 인커밍 포트가 없다면 애플리케이션 중심에 접근한는 진입점을 한 눈에 파악하기 어려워 특정 유스케이스 구현을 위해 애플리케이션 내부 동작에 대해 더 잘 알아야 한다. 또한 아키텍처를 강제하는 것이 더 어려워진다.
- 애플리케이션의 규모가 작거나 제어 흐름을 단숨에 파악할 수 있다면 인커밍 포트가 없는 것이 편하다. 하지만 애플리케이션의 규모가 계속 작게 유지될 것이라고 확신하기 어려울 것이다.

## 애플리케이션 서비스 건너뛰기

- 어떤 유스케이스에서는 애플리케이션 계층을 통째로 건너뛰고 싶을 수도 있다. (예: 간단한 CRUD 유스케이스)
- 시간이 지남에 따라 CRUD 유스케이스가 점점 복잡해지면 도메인 로직을 그대로 아웃고잉 어댑터에 추가하고 싶은 생각이 들기 쉽고, 도메인 로직이 흩어져서 도메인 로직을 찾거나 유지보수하기 어려워진다.
- 간단한 CRUD 케이스에서 애플리케이션 서비스를 건너뛰기로 결정할 수도 있지만, 유스케이스가 더 많은 일을 하게 되면 애플리케이션 서비스를 만든다는 명확한 가이드라인을 팀에 정해둬야 한다.

## 유지보수 가능한 소프트웨어를 만드는데 어떻게 도움이 될까?

- 경제적인 관점에서 지름길이 합리적일 때도 있다.
- 어떤 경우든 아키텍처에 대해, 그리고 왜 특정 지름길을 선택했는가에 대한 기록을 남겨서 나중에 우리 자신 또는 프로젝트를 인계받는 이들이 이 결정에 대해 다시 평가할 수 있게 하자.
