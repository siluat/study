# Chapter 11 시각적 효과

## 이론 학습

### 서피스(Surface)

화면의 픽셀을 나타내는 메모리 덩어리(chunk)를 서피스라고 부른다. 서피스를 잘 처리하는 것은 좋은 브라우저 성능을 위해서 필수적이다.

## 용어 정리

- Skia: 스키아 그래픽스 엔진 또는 스키아는 C++로 개발된 오픈 소스 2D 그래픽 라이브러리이다. 스키아는 플랫폼별 그래픽 API를 추상화한다. - 출처: 위키백과
- SDL(Simple DirectMedia Layer): C 프로그래밍 언어로 짜여진 크로스플랫폼 개발 라이브러리이다. 이 라이브러리는 비디오, 오디오, 사용자 입력 등의 계층을 추상화하여, 리눅스, 마이크로소프트 윈도우, 맥 OS X 등 여러 운영 체제에서 실행할 수 있도록 한다. - 출처: 위키백과

## 참고

> `<canvas>` HTML 엘리먼트는 Skia나 Tkinter와 유사한 API를 자바스크립트 API로 제공합니다. WebGL과 결합하면 기본적으로 모든 SDL과 Skia 기능을 자바스크립트로 구현할 수 있습니다. 또 다른 대안으로, 웹 어셈블리를 이용하여 Skia를 컴파일해서 직접 적용하는 것도 가능합니다.

## 실습

- 그래픽 라이브러리 교체: Tkinter -> Skia + SDL
  - Tkinter는 고성능 그래픽 카드와 GPU가 널리 사용되기 전부터 만들어진 라이브러리로 현대적인 그래픽 처리를 하기에 적합하지 않다.
  - Tkinter 윈도우 대신 SDL 윈도우를 만들어 사용한다. Skia는 입력을 처리하거나 그래픽 윈도우 창을 생성하지 않기 때문에 SDL GUI 라이브러리를 함께 사용한다.
  - SDL에는 mainloop와 bind가 없으므로 이벤트 처리를 위한 mainloop 함수를 직접 구현해서 사용한다.
  - Skia가 브라우저 크롬과 페이지 콘텐츠를 그릴 서피스를 Browser 클래스의 root_surface 속성에 생성한다.
  - Browser 클래스의 draw 메서드에서는 Skia 서피스를 SDL 서피스로 복사하는 처리를 추가한다.
